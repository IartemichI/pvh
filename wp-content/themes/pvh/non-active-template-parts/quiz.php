<section class="quiz">
    <h2 class="quiz__main-title main-font">Расчет стоимости</h2>
    <div class="quiz__body">
        <div class="quiz__first">
            <div class="quiz__item __active">
                <h4 class="quiz__title main-font">Что считаем?</h4>
                <div class="quiz__group">
                    <div class="quiz__gr-item">
                        <div data-quiz-type="pvh" class="quiz__checkbox quiz-type __active"><span
                                    class="quiz__name __quiz-value main-font">ПВХ завесы</span>
                            <div class="quiz__circle">
                                <div class="quiz__sphere"></div>
                            </div>
                        </div>
                    </div>
                    <div class="quiz__gr-item">
                        <div data-quiz-type="pvh" class="quiz__checkbox quiz-type"><span
                                    class="quiz__name __quiz-value main-font">ПВХ шторы</span>
                            <div class="quiz__circle">
                                <div class="quiz__sphere"></div>
                            </div>
                        </div>
                    </div>
                    <div class="quiz__gr-item">
                        <div data-quiz-type="door" class="quiz__checkbox quiz-type"><span
                                    class="quiz__name __quiz-value main-font">Маятниковые двери</span>
                            <div class="quiz__circle">
                                <div class="quiz__sphere"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="quiz__item __active __sub-item-quiz item-quiz-pvh">
                <h4 class="quiz__title main-font">Температурный режим?</h4>
                <div class="quiz__group">
                    <div class="quiz__gr-item">
                        <div class="quiz__checkbox quiz-temp __active">
                            <span class="quiz__name __quiz-value main-font">ниже 0 °C </span>
                            <div class="quiz__circle">
                                <div class="quiz__sphere"></div>
                            </div>
                        </div>
                    </div>
                    <div class="quiz__gr-item">

                        <div class="quiz__checkbox quiz-temp"><span
                                    class="quiz__name __quiz-value main-font">выше 0 °C </span>
                            <div class="quiz__circle">
                                <div class="quiz__sphere"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="quiz__item __active __sub-item-quiz item-quiz-pvh item-quiz-door">
                <h4 class="quiz__title main-font">Интенсивность движения?</h4>
                <div class="quiz__group">
                    <div class="quiz__gr-item">
                        <div class="quiz__checkbox quiz-depth-move __active"><span
                                    class="quiz__name __quiz-value main-font">Высокая</span>
                            <div class="quiz__circle">
                                <div class="quiz__sphere"></div>
                            </div>
                        </div>
                    </div>
                    <div class="quiz__gr-item">

                        <div class="quiz__checkbox quiz-depth-move"><span
                                    class="quiz__name __quiz-value main-font">средняя</span>
                            <div class="quiz__circle">
                                <div class="quiz__sphere"></div>
                            </div>
                        </div>
                    </div>
                    <div class="quiz__gr-item">

                        <div class="quiz__checkbox quiz-depth-move"><span
                                    class="quiz__name __quiz-value main-font">низкая</span>
                            <div class="quiz__circle">
                                <div class="quiz__sphere"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="quiz__item __sub-item-quiz  item-quiz-door">
                <h4 class="quiz__title main-font">Основной трафик?</h4>
                <div class="quiz__group">
                    <div class="quiz__gr-item">

                        <div class="quiz__checkbox quiz-traffic __active"><span
                                    class="quiz__name __quiz-value main-font">люди</span>
                            <div class="quiz__circle">
                                <div class="quiz__sphere"></div>
                            </div>
                        </div>
                    </div>
                    <div class="quiz__gr-item">

                        <div class="quiz__checkbox quiz-traffic"><span
                                    class="quiz__name __quiz-value main-font">техника</span>
                            <div class="quiz__circle">
                                <div class="quiz__sphere"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="quiz__item __sub-item-quiz  item-quiz-door">
                <h4 class="quiz__title main-font">Тип используемого материала?</h4>
                <div class="quiz__group">
                    <div class="quiz__gr-item">

                        <div class="quiz__checkbox quiz-type-material __active"><span
                                    class="quiz__name __quiz-value main-font">эластичные пвх</span>
                            <div class="quiz__circle">
                                <div class="quiz__sphere"></div>
                            </div>
                        </div>
                    </div>
                    <div class="quiz__gr-item">

                        <div class="quiz__checkbox quiz-type-material"><span
                                    class="quiz__name __quiz-value main-font">Сэндвич панели</span>
                            <div class="quiz__circle">
                                <div class="quiz__sphere"></div>
                            </div>
                        </div>
                    </div>
                    <div class="quiz__gr-item">

                        <div class="quiz__checkbox quiz-type-material"><span class="quiz__name __quiz-value  main-font">не знаю</span>
                            <div class="quiz__circle">
                                <div class="quiz__sphere"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="quiz__comment">
                <h4 class="quiz__title main-font">Размеры?</h4>
                <p class="quiz__desc submain-font">Необходимо для расчета стоимости. Например: 220 (ширина)х160 (высота)
                    см.</p>
                <label for="">
                    <textarea name="quiz_comment" id="quiz-comment" class="quiz__textarea __quiz_value"></textarea>
                </label>
            </div>
            <div class="quiz__body-btn">
                <button class="quiz__button main-font main-btn btn">далее</button>
            </div>
            <!--
            <input type="hidden" name="quiz-type" id="__quiz-type" value="ПВХ завесы">
            <input type="hidden" name="quiz-temp" id="__quiz-temp" value="ниже 0 °C">
            <input type="hidden" name="quiz-depth-move" id="__quiz-depth-move" value="Высокая">
            <input type="hidden" name="quiz-traffic" id="__quiz-traffic" value="люди">
            <input type="hidden" name="quiz-type-material" id="__quiz-type-material" value="эластичные пвх">
            <input type="hidden" name="quiz-comment" id="__quiz-comment" value="">
-->
            <!--
            contact form template
            [hidden quiz-type id:__quiz-type "ПВХ завесы"]
            [hidden quiz-temp id:__quiz-temp "ниже 0 °C"]
            [hidden quiz-depth-move id:__quiz-depth-move "Высокая"]
            [hidden quiz-traffic id:__quiz-traffic]
            [hidden quiz-type-material id:__quiz-type-material]
            [hidden quiz-comment id:__quiz-comment]
            -->
        </div>
        <div class="quiz_second">
            <div class="form-modal">
                <div class="form-modal__overlay"></div>
                <div class="form-modal__body">
                    <div class="form-modal__wrapper">
                        <h4 class="form-modal__title main-font">Заполните форму, чтобы получить результаты теста.</h4>
                        <p class="form-modal__desc submain-font">Оставьте заявку и мы свяжемся с вами в ближайшее
                            время</p>
                        <div class="form-modal__group">
                            <label>
                                <input aria-required="true"
                                       class="submain-font wpcf7-validates-as-required form-modal__input"
                                       name="quiz-name" type="text"
                                       placeholder="Имя">
                            </label>
                            <label>
                                <input aria-required="true"
                                       class="submain-font wpcf7-validates-as-required form-modal__input"
                                       name="quiz-email" type="email"
                                       placeholder="Email">
                            </label>
                            <label>
                                <input aria-required="true"
                                       class="submain-font wpcf7-validates-as-required form-modal__input form-modal__phone"
                                       name="quiz-number"
                                       type="text" placeholder="Телефон">
                            </label>
                        </div>
                        <div class="form-modal__wrapper-btn">
                            <input class="form-modal__btn btm main-btn main-font" type="submit"
                                   value="получить результат">
                        </div>
                        <div class="form-modal__personal wpcf7-form-control-wrap" data-name="quiz-checkbox">
                            <div class="form-modal__wrapper-checkbox wpcf7-form-control wpcf7-checkbox wpcf7-validates-as-required">
                                <input class="form-modal__checkbox" type="checkbox" name="form-personal"
                                       id="__form-personal">
                                <label for="__form-personal"></label>
                            </div>
                            <div class="form-modal__text submain-font">
                                С
                                <a href="">Положением об обработке персональных данных </a>и
                                <a href=""> Политикой
                                    конфиденциальности</a> ознакомлен и согласен
                            </div>
                        </div>
                        <div class="wpcf7-response-output"></div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<script src="https://unpkg.com/imask"></script>
<script>
    let quizText = ['ПВХ завесы', 'ПВХ шторы', 'Маятниковые двери'];
    document.addEventListener('DOMContentLoaded', function () {
        const quizTypes = ['quiz-type', 'quiz-temp', 'quiz-depth-move', 'quiz-traffic', 'quiz-type-material'];
        for (let i = 0; quizTypes.length > i; ++i) {
            let quizActive = '';
            const quizVariant = document.querySelectorAll('.' + quizTypes[i]);
            let indexQuiz = 0;
            quizVariant.forEach(item => {
                    if (quizTypes[i] === 'quiz-type') {
                        item.childNodes[0].innerHTML = quizText[indexQuiz];
                        ++indexQuiz;
                    }
                    if (item.classList.contains('__active')) {
                        quizActive = item;
                    }
                    item.addEventListener('click', e => {
                        quizActive.classList.remove('__active');
                        item.classList.add('__active');
                        quizActive = item;
                        document.querySelector('#__' + quizTypes[i]).value = item.childNodes[0].textContent;
                        if (quizTypes[i] === 'quiz-type') {
                            document.querySelectorAll('.__sub-item-quiz ').forEach(item => item.classList.remove('__active'));
                            document.querySelectorAll('.item-quiz-' + item.getAttribute('data-quiz-type')).forEach(item => item.classList.add('__active'));
                        }
                    });
                }
            );
        }

        document.querySelector('.quiz__button').addEventListener('click', btn => {
            btn.preventDefault();
            const quizType = document.querySelector('#__quiz-type').value;
            if (quizType === quizText[0] || quizType === quizText[1]) {
                document.querySelector('#__quiz-traffic').value = '';
                document.querySelector('#__quiz-type-material').value = '';
            } else {
                document.querySelector('#__quiz-temp').value = '';
            }
            document.querySelector('.form-modal').classList.add('__active');
            document.querySelector('.body').style.overflow = 'hidden';
        });
        document.querySelector('.form-modal__overlay').addEventListener('click', () => {
            document.querySelector('.form-modal').classList.remove('__active');
            document.querySelector('.body').style.overflow = '';
        });
    });
    var phoneMask = IMask(
        document.querySelector('.form-modal__phone'), {
            mask: '+{7}(000)000-00-00'
        });
</script>